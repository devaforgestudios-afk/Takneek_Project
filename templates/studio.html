{% extends "layout.html" %}
{% block title %}Studio | Kalakar Sahayak{% endblock %}
{% block content %}
<link
    href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@600;700&family=Inter:wght@300;400;600&display=swap"
    rel="stylesheet">
<link rel="stylesheet" href="static/css/studio.css">
<link rel="stylesheet" href="static/css/community.css">
<link rel="stylesheet"
    href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />

<div class="studio-container">
    <!-- Hero Section -->
    <section class="studio-hero">
        <div class="hero-content">
            <h1 class="studio-title">My Studio</h1>
            <p class="studio-subtitle">Upload, manage, and showcase your creative works to the world</p>
        </div>
    </section>


    <!-- Main Studio Content -->
    <section class="studio-content">
        <div class="studio-wrapper">
            <!-- Tab Navigation -->
            <div class="studio-tabs">
                <button class="studio-tab active" data-tab="upload">Upload New Work</button>
                <button class="studio-tab" data-tab="works">My Works</button>
                <button class="studio-tab" data-tab="profile">Profile</button>
                <button class="studio-tab" data-tab="posts">My Posts</button>
                <a href="/logout" class="studio-tab" id="logout-button">
                    <span class="material-symbols-outlined">logout</span>
                    Logout
                </a>

            </div>

            <!-- Upload Tab Content -->
            <div id="uploadTab" class="tab-content active">
                <div class="upload-section">
                    <div class="left-panel">
                        <div class="form-card">
                            <h2 class="card-title">Create New Artwork</h2>
                            <p class="card-subtitle">Share your craft with the world</p>

                            <form id="artworkForm" onsubmit="handleArtworkSubmit(event)">
                                <div class="form-group">
                                    <label for="artworkTitle">Artwork Title</label>
                                    <input type="text" id="artworkTitle" placeholder="e.g., Madhubani Peacock Design"
                                        required>
                                </div>

                                <div class="form-group">
                                    <label for="category">Category</label>
                                    <select id="category" required>
                                        <option value="">Select category</option>
                                        <option value="painting">Painting</option>
                                        <option value="pottery">Pottery</option>
                                        <option value="textile">Textile</option>
                                        <option value="jewelry">Jewelry</option>
                                        <option value="woodwork">Woodwork</option>
                                        <option value="metalwork">Metalwork</option>
                                    </select>
                                </div>

                                <div class="form-group">
                                    <label for="materialUsed">Material Used</label>
                                    <input type="text" id="materialUsed"
                                        placeholder="e.g., Natural dyes on handmade paper" required>
                                </div>

                                <div class="form-group">
                                    <div style="display: flex; justify-content: space-between; align-items: center;">
                                        <label for="description">Description / Story</label>
                                        <button type="button" id="generateDescBtn" class="btn-secondary"
                                            style="padding: 5px 10px; font-size: 12px; margin-left: 10px; margin-bottom: 5px;">
                                            <span class="material-symbols-outlined"
                                                style="font-size: 16px;">auto_awesome</span>
                                            Generate Description
                                        </button>
                                    </div>
                                    <textarea id="description" rows="4"
                                        placeholder="Tell the story behind your creation..." required></textarea>
                                </div>

                                <div class="form-group">
                                    <div class="price" style="display: flex;">
                                        <label for="price">Price (₹) - Optional</label>
                                        <button type="button" id="suggestPriceBtnForm" class="btn-secondary"
                                            style="padding: 5px 10px; font-size: 12px; margin-left: 10px; margin-bottom: 5px;">
                                            <span class="material-symbols-outlined"
                                                style="font-size: 16px;">auto_stories</span>
                                            Suggest Fair Price
                                        </button>                                    </div>
                                    <input type="number" id="price" placeholder="e.g., 2500" min="0">

                                </div>

                                <div class="form-group">
                                    <label>Upload Media</label>
                                    <div class="upload-area" id="uploadArea">
                                        <span class="material-symbols-outlined upload-icon">cloud_upload</span>
                                        <p class="upload-text">Drag and drop your files here, or click to browse</p>
                                        <p class="upload-hint">Supports Images, Videos, PDFs</p>
                                        <input type="file" id="fileInput" accept="image/*,video/*,.pdf" multiple hidden>
                                    </div>
                                    <div id="filePreview" class="file-preview"></div>
                                </div>

                                <div class="form-actions">
                                    <button type="button" class="btn-secondary">Save Draft</button>
                                    <button type="submit" class="btn-primary">Publish to Marketplace</button>
                                </div>
                            </form>
                        </div>
                    </div>

                    <div class="right-panel">
                        <div class="ai-tools-card">
                            <div class="tools-header">
                                <h3 class="tools-title">✨ AI-Powered Tools</h3>
                                <p class="tools-subtitle">Enhance your artwork</p>
                            </div>

                            <div class="tools-grid">

                                <button class="tool-item" id="suggestPriceBtn">
                                    <div class="tool-content">
                                        <span class="tool-name">Suggest Fair Price</span>
                                        <span class="tool-desc">Market-based pricing</span>
                                    </div>
                                    <span class="tool-arrow">→</span>
                                </button>
                                <button class="tool-item" id="generateDescBtnAi">
                                    <div class="tool-content">
                                        <span class="tool-name">Generate Description</span>
                                        <span class="tool-desc">AI-powered writing</span>
                                    </div>
                                    <span class="tool-arrow">→</span>
                                </button>
                                <button class="tool-item">
                                    <div class="tool-content">
                                        <span class="tool-name">Enhance Design Preview</span>
                                        <span class="tool-desc">Visual optimization</span>
                                    </div>
                                    <span class="tool-arrow">→</span>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div id="profileTab" class="tab-content">
                <div class="profile-section">
                    <div class="profile-info-container">
                        <div class="profile-card">
                            <div class="profile-header">
                                <div class="profile-avatar">
                                    <span class="material-symbols-outlined">account_circle</span>
                                </div>
                                <div class="profile-info">
                                    <h2 class="profile-name" id="profileName">Loading...</h2>
                                    <p class="profile-email" id="profileEmail">Loading...</p>
                                </div>
                            </div>
                            <div class="profile-stats">
                                <div class="stat-item">
                                    <span class="stat-value" id="totalArtworks">0</span>
                                    <span class="stat-label">Artworks</span>
                                </div>
                                <div class="stat-item">
                                    <span class="stat-value" id="totalViews">0</span>
                                    <span class="stat-label">Total Views</span>
                                </div>
                                <div class="stat-item">
                                    <span class="stat-value" id="totalLikes">0</span>
                                    <span class="stat-label">Total Likes</span>
                                </div>
                            </div>
                        </div>
                        <div class="profile-actions">
                            <button class="btn-marketplace btn-dark-marketplace" onclick="goToMarketplace()">
                                <span class="material-symbols-outlined">storefront</span>
                                Go to Your Marketplace
                            </button>
                        </div>
                    </div>
                    <div class="profile-qr-container">
                        <div class="profile-qr-section">
                            <h3 class="section-title">Your Artist Profile QR</h3>
                            <p class="section-subtitle">Share this QR code to let others discover your artwork collection</p>
                            <div class="qr-display" id="profileQrContainer">
                                <div class="qr-loading">
                                    <span class="material-symbols-outlined">hourglass_empty</span>
                                    <p>Generating QR Code...</p>
                                </div>
                            </div>
                            <button class="btn-primary" onclick="downloadProfileQr()">
                                <span class="material-symbols-outlined">download</span>
                                Download QR Code
                            </button>
                        </div>
                    </div>
                </div>
            </div>


            <!-- My Works Tab Content -->
            <div id="worksTab" class="tab-content">
                <div class="works-grid">
                    <div class="empty-state">
                        <span class="material-symbols-outlined empty-icon">inventory_2</span>
                        <h3>No artworks yet</h3>
                        <p>Start by uploading your first creation</p>
                        <button class="btn-primary" onclick="switchTab('upload')">Upload Artwork</button>
                    </div>
                </div>
            </div>

            <!-- My Posts Tab Content -->
            <div id="postsTab" class="tab-content">
                <div class="posts-header">
                    <h2 class="card-title">My Community Posts</h2>
                    <button class="create-post-btn" id="createPostStudioBtn" style="margin-bottom: 20px;">
                        <span class="material-symbols-outlined" >add</span>
                        Create Post
                    </button>
                    <div class="sort-container">
                        <label for="postSort">Sort by:</label>
                        <select id="postSort">
                            <option value="newest">Newest First</option>
                            <option value="oldest">Oldest First</option>
                        </select>
                    </div>
                </div>
                <div class="container">
                    <div class="posts-grid">
                        <!-- Posts will be loaded here -->
                    </div>
                </div>
            </div>

        </div>


    </section>
</div>




<!-- QR Code Modal -->
<div id="qrCodeModal" class="modal">
    <div class="modal-content">
        <button class="modal-close" onclick="closeQrCodeModal()">&times;</button>
        <div class="modal-header">
            <h2 class="modal-title">Scan QR Code</h2>
            <p class="modal-subtitle">Share your artwork with a single scan</p>
        </div>
        <div id="qrCodeContainer" style="text-align: center;"></div>
    </div>
</div>

<!-- Auth Modal -->
<div id="authModal" class="modal">
    <div class="modal-content">
        <button class="modal-close" onclick="closeAuthModal()">&times;</button>

        <div class="modal-header">
            <h2 class="modal-title">Welcome to My Studio</h2>
            <p class="modal-subtitle">Please login or create an account to continue</p>
        </div>

        <!-- Auth Tabs -->
        <div class="auth-tabs">
            <button class="auth-tab active" onclick="switchAuthTab('login')">Login</button>
            <button class="auth-tab" onclick="switchAuthTab('signup')">Sign Up</button>
        </div>

        <!-- Login Form -->
        <div id="loginForm" class="auth-form active">
            <form onsubmit="handleLogin(event)">
                <div class="form-group">
                    <label for="loginEmail">Email Address</label>
                    <div class="input-wrapper">
                        <span class="material-symbols-outlined input-icon">email</span>
                        <input type="email" id="loginEmail" placeholder="artisan@example.com" required>
                    </div>
                </div>

                <div class="form-group">
                    <label for="loginPassword">Password</label>
                    <div class="input-wrapper">
                        <span class="material-symbols-outlined input-icon">lock</span>
                        <input type="password" id="loginPassword" placeholder="••••••••" required>
                    </div>
                </div>

                <div class="form-options">
                    <label class="checkbox-label">
                        <input type="checkbox">
                        Remember me
                    </label>
                    <a href="#" class="forgot-link">Forgot password?</a>
                </div>

                <button type="submit" class="submit-btn">
                    <span class="material-symbols-outlined">login</span>
                    Login to Studio
                </button>
            </form>

            <div class="divider"><span>or continue with</span></div>

            <div class="social-login">
                <button class="social-btn google">
                    <span>G</span> Google
                </button>
                <button class="social-btn facebook">
                    <span>f</span> Facebook
                </button>
            </div>
        </div>

        <!-- Signup Form -->
        <div id="signupForm" class="auth-form">
            <form onsubmit="handleSignup(event)">
                <div class="form-group">
                    <label for="signupName">Full Name</label>
                    <div class="input-wrapper">
                        <span class="material-symbols-outlined input-icon">person</span>
                        <input type="text" id="signupName" placeholder="Your full name" required>
                    </div>
                </div>

                <div class="form-group">
                    <label for="signupEmail">Email Address</label>
                    <div class="input-wrapper">
                        <span class="material-symbols-outlined input-icon">email</span>
                        <input type="email" id="signupEmail" placeholder="artisan@example.com" required>
                    </div>
                </div>

                <div class="form-group">
                    <label for="signupPassword">Password</label>
                    <div class="input-wrapper">
                        <span class="material-symbols-outlined input-icon">lock</span>
                        <input type="password" id="signupPassword" placeholder="At least 8 characters" required>
                    </div>
                </div>

                <div class="form-group">
                    <label for="signupConfirmPassword">Confirm Password</label>
                    <div class="input-wrapper">
                        <span class="material-symbols-outlined input-icon">lock</span>
                        <input type="password" id="signupConfirmPassword" placeholder="Confirm your password" required>
                    </div>
                </div>

                <label class="checkbox-label agreement">
                    <input type="checkbox" required>
                    I agree to the Terms of Service and Privacy Policy
                </label>

                <button type="submit" class="submit-btn">
                    <span class="material-symbols-outlined">person_add</span>
                    Create Account
                </button>
            </form>

            <div class="divider"><span>or continue with</span></div>

            <div class="social-login">
                <button class="social-btn google">
                    <span>G</span> Google
                </button>
                <button class="social-btn facebook">
                    <span>f</span> Facebook
                </button>
            </div>
        </div>
    </div>
</div>

<script src="static/js/studio.js"></script>


{% endblock %}